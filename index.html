<!DOCTYPE html>
<html>
<head lang="fr">
    <meta charset="UTF-8">
    <title>Vos tests ont besoin d'amour</title>
    <link type="text/css" rel="stylesheet" href="bower_components/reveal.js/css/reveal.min.css"/>
    <link type="text/css" rel="stylesheet" href="bower_components/reveal.js/css/theme/sky.css"/>
    <link type="text/css" rel="stylesheet" href="styles.css"/>
</head>
<body>
<div class="reveal">
<div class="slides">
<section>
    <h2>Vos tests ont besoin d'amour</h2>

    <p>Benoit Sautel - développeur</p>
</section>
<section data-background="images/A350-XWB-water-ingestion-test-Istres.jpg">
    <!-- http://www.airbus.com/galleries/photo-gallery/dg/idp/38707-a350-xwb-water-ingestion-test-istres-2/?share=1 -->
    <h2>Tester son code</h2>
</section>
<!-- Symptomes des tests malades -->
<section data-background="https://farm4.staticflickr.com/3514/3784919632_f8941be12e_o.jpg">
    <!-- https://www.flickr.com/photos/krancien/3784919632 -->
    <h2>Quand tester devient une corvée</h2>
</section>
<section data-background="https://farm8.staticflickr.com/7330/11242674334_646077da6b_o.jpg">
    <!-- https://www.flickr.com/photos/twiga_269/11242674334 -->
    <h2>Tester du code testable</h2>
    <aside class="notes">
        Problème de conception
    </aside>
</section>
<section data-background="https://farm8.staticflickr.com/7143/6754133857_2f3b9cac45_o.jpg">
    <!-- https://www.flickr.com/photos/rzelazko/6754133857 -->
    <h2>SOLID</h2>

    <blockquote>Les 5 principes fondamentaux de la programmation orientée objet</blockquote>
</section>
<section data-background="https://farm6.staticflickr.com/5291/5510455925_7cc3b6c201_o.jpg">
    <!-- https://www.flickr.com/photos/klausonline/5510455925/in/photostream/ -->
    <section>
        <h2>Single Responsibility Principle</h2>

        <blockquote>Une classe ne doit faire qu'une seule chose</blockquote>
    </section>
    <section>
        <h2>Conséquences</h2>
        <ul>
            <li>Un seul niveau d'abstraction par classe</li>
            <li>Une classe n'a pas plus d'une raison de changer</li>
            <li>Cohésion fonctionnelle (au sens LCOM4)</li>
            <li>Beaucoup de délégation</li>
            <li>Nommage simple et explicite</li>
            <li>Peu de méthodes publiques (idéalement une)</li>
            <li>100 lignes maximum</li>
            <li>Facilement réutilisable</li>
        </ul>
    </section>
    <section>
        <h2>En cas de non-respect</h2>
        <ul>
            <li>Difficulté pour nommer la classe autrement que <em>XxxManager</em></li>
            <li>Besoin de tester une méthode privée</li>
            <li>Changements fréquents donc refactoring</li>
            <li>Difficile à substituer dans un test</li>
        </ul>
    </section>
</section>
<section data-background="https://farm2.staticflickr.com/1111/3173827605_427626c6af_b.jpg">
    <!-- https://www.flickr.com/photos/ringai/3173827605 -->
    <section>
        <h2>Dependency Inversion Principle</h2>

        <blockquote>Une classe ne doit pas avoir de couplage avec les implémentations de ses dépendances
            (délégation)
        </blockquote>
    </section>
    <section>
        <h2>Conséquences</h2>
        <ul>
            <li>Demande toutes ses dépendances dans le constructeur</li>
            <li>C'est à l'appelant de choisir les collaborateurs (inversion de contrôle)</li>
            <li>Utilisable dans d'autres contextes</li>
        </ul>
    </section>
    <section>
        <h2>En cas de non respect</h2>
        <ul>
            <li>Moins réutilisable</li>
            <li>Difficilement testable (pas de substitution possible des collaborateurs)</li>
        </ul>
    </section>
    <section>
        <h2>Injection de dépendances</h2>

        <blockquote>Spring, Guice, ...</blockquote>
    </section>
</section>
<section data-background="https://farm3.staticflickr.com/2754/4205599261_7b3ba59ece_o.jpg">
    <!-- https://www.flickr.com/photos/marcp_dmoz/4205599261 -->
    <section>
        <h2>Liskov Substitution Principle</h2>

        <blockquote>Un type doit toujours pouvoir être remplacé par un sous type sans changer la sémantique du
            code
        </blockquote>
    </section>
    <section>
        <h2>Conséquences</h2>
        <ul>
            <li>Héritage seulement si polymorphisme</li>
            <li>L'héritage ne doit pas servir à partager du code</li>
        </ul>
    </section>
    <section>
        <h2>En cas de non respect</h2>
        <ul>
            <li>Carré / rectangle</li>
            <li>
                <pre><code class="java">throw new UnsupportedOperationException();</code></pre>
            </li>
            <li>Fort couplage entre classes d'un arbre d'héritage</li>
        </ul>
    </section>
    <section>
        <h2>Astuce</h2>

        <p>Privilégier l'héritage de comportement à l'héritage d'état</p>

        <p>En Java / PHP :</p>
        <ul>
            <li>Privilégier <em>implements</em> à <em>extends</em></li>
            <li>Eviter les classes abstraites, utiliser plutôt le pattern strategy</li>
        </ul>
    </section>
</section>
<section data-background="https://farm6.staticflickr.com/5173/5425491249_867af2cbb2_o.jpg">
    <!-- https://www.flickr.com/photos/bourguiboeuf/5425491249 -->
    <h2>Interface segregation principle</h2>

    <blockquote>Un client d'une classe ne doit pas dépendre de méthodes qu'il n'utilise pas</blockquote>
</section>
<section data-background="https://farm3.staticflickr.com/2452/3671903002_bb08402236_o.jpg">
    <!-- https://www.flickr.com/photos/reallyboring/3671903002 -->
    <h2>Open Closed Principle</h2>

    <blockquote>Une classe doit être ouverte à l'extension mais fermée à la modification</blockquote>
</section>
<section data-background="https://farm2.staticflickr.com/1296/1135509841_56364b2752_o.jpg">
    <!-- https://www.flickr.com/photos/declicjardin/1135509841 -->
    <h2>Design patterns</h2>
</section>
<section>
    <h2>Des tests efficaces</h2>
</section>
<section data-background="https://farm7.staticflickr.com/6042/6344633404_5ba442250a_o.jpg">
    <!-- https://www.flickr.com/photos/sumofmarc/6344633404 -->
    <h2>FIRST</h2>
</section>
<section data-background="https://farm6.staticflickr.com/5310/5562042553_6ee5df36a3_o.jpg">
    <!-- https://www.flickr.com/photos/johnnytsunami/5562042553 -->
    <h2>Fast</h2>
</section>
<section>
    <h2>Independant</h2>
</section>
<section data-background="https://farm4.staticflickr.com/3242/2858826101_a96251a152_o.jpg">
    <!-- https://www.flickr.com/photos/andraspfaff/2858826101 -->
    <h2>Repeatable</h2>
</section>
<section data-background="https://farm3.staticflickr.com/2672/3780218641_f289ec1028_o.png">
    <!-- https://www.flickr.com/photos/zunami/3780218641 -->
    <h2>Self-validating</h2>
</section>
<section data-background="https://farm4.staticflickr.com/3288/3132953696_20c6092d7d_o.jpg">
    <!-- https://www.flickr.com/photos/jfgornet/3132953696 -->
    <h2>Timely</h2>
</section>
<section data-background="https://farm3.staticflickr.com/2852/10740309163_71573d800b_o.jpg">
    <!-- https://www.flickr.com/photos/liverpoolhls/10740309163 -->
    <h2>Au plus près du code</h2>
</section>
<section data-background="https://farm3.staticflickr.com/2789/4485931477_86756e94ba_o.jpg">
    <!-- https://www.flickr.com/photos/sergiu_bacioiu/4485931477 -->
    <h2>Mock ou pas mock ?</h2>
    <!-- http://martinfowler.com/articles/mocksArentStubs.html -->
    <ul>
        <li>Fake objects</li>
        <li>Stubs</li>
        <li>Mocks</li>
    </ul>
</section>
<section data-background="https://farm6.staticflickr.com/5105/5657591809_02e1d8b59c_o.jpg">
    <!-- https://www.flickr.com/photos/jpott/5657591809 -->
    <h2>Code asynchrone</h2>

    <ul>
        <li>Eviter le code asynchrone</li>
        <li>Utiliser des outils de test asynchrone pour faire de l'attente active</li>
    </ul>
</section>
<section>
    <section data-background="https://farm6.staticflickr.com/5242/5364128968_7e7d01de07_o.jpg">
        <!-- https://www.flickr.com/photos/pennuja/5364128968/in/photostream/ -->
        <h2>Exploitez les outils</h2>
    </section>
    <section>
        <h2>Rules</h2>
    </section>
    <section>
        <h2>Assertions</h2>
        <pre><code class="java">assertThat(france.getCapital(), is("Paris"));</code></pre>
        <pre><code class="java">assertThat(france.getThreeBiggestCities(), contains("Paris", "Marseille", "Lyon"));
assertThat(france.getThreeBiggestCities(), containsInAnyOrder("Marseille", "Lyon", "Paris"));</code></pre>
    </section>
</section>
<section data-background="https://farm5.staticflickr.com/4112/5408763997_c61bd40b1f_o.jpg">
    <!-- https://www.flickr.com/photos/30998987@N03/5408763997 -->
    <h2>Faire échouer le test</h2>
</section>
<section>
    <h2>Analyser la pertinence des tests</h2>
</section>
<section>
    <h2>Couverture de code</h2>
</section>
<section data-background="https://farm5.staticflickr.com/4085/4966621857_a4a22ae264_o.jpg">
    <!-- https://www.flickr.com/photos/kaibara/4966621857 -->
    <h2>Mutation de code</h2>
</section>
<section data-background="https://farm7.staticflickr.com/6099/5915310417_b7eaf572f0_o.jpg">
    <!-- https://www.flickr.com/photos/dvids/5915310417 -->
    <h2>Et dans la vraie vie ?</h2>
</section>
</div>
</div>
<script type="text/javascript" src="bower_components/reveal.js/lib/js/head.min.js"></script>
<script type="text/javascript" src="bower_components/reveal.js/js/reveal.js"></script>
<script type="text/javascript">Reveal.initialize({
    history: true,
    dependencies: [
        { src: 'bower_components/reveal.js/plugin/highlight/highlight.js',
            async: true,
            callback: function () {
                hljs.initHighlightingOnLoad();
            }
        },
        { src: 'bower_components/reveal.js/plugin/notes/notes.js',
            async: true,
            condition: function () {
                return !!document.body.classList;
            }
        }
    ]
});</script>
</body>
</html>